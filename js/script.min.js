"use strict";function getData(){var e=void 0,a=new XMLHttpRequest;a.open("GET","data.json"),a.onreadystatechange=function(){if(4==a.readyState)if(200!=a.status){var t=document.createElement("H1");t.classList.add("games-table__error"),t.appendChild(document.createTextNode("Sorry :( "+a.status+": "+a.statusText)),gameTableContainer.appendChild(t)}else{try{e=JSON.parse(a.responseText)}catch(e){var d=document.createElement("H1");d.classList.add("games-table__error"),d.appendChild(document.createTextNode("Wrong data :( "+e.message)),gameTableContainer.appendChild(d)}gameTableContainer.appendChild(createTable(e)),document.querySelector(".games-table__score").addEventListener("click",sortByScore),document.querySelector(".games-table__sort-btn").addEventListener("click",sortByScore)}},a.send()}function clearContainer(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function createTable(e){var a=document.createElement("TABLE");a.classList.add("games-table__table");var t=document.createElement("TBODY"),d=document.createElement("TR"),n=document.createElement("TH");n.classList.add("games-table__title"),n.appendChild(document.createTextNode("Title"));var r=document.createElement("TH");r.classList.add("games-table__score"),r.classList.add("games-table__score--sort"),r.appendChild(document.createTextNode("Score"));var s=document.createElement("TH");s.classList.add("games-table__review"),s.appendChild(document.createTextNode("Reviews"));var c=document.createElement("TH");c.classList.add("games-table__genre"),c.appendChild(document.createTextNode("Main Genre"));var l=document.createElement("TH");l.classList.add("games-table__release-date"),l.appendChild(document.createTextNode("Release Date"));var o=document.createElement("TH");o.classList.add("games-table__status"),o.appendChild(document.createTextNode("Status"));var i=document.createElement("TH");return i.classList.add("games-table__icons"),d.appendChild(n),d.appendChild(r),d.appendChild(s),d.appendChild(c),d.appendChild(l),d.appendChild(o),d.appendChild(i),t.appendChild(d),a.appendChild(t),e.games.forEach(function(e){var a=document.createElement("TR"),d=document.createElement("TD");d.classList.add("games-table__title-content");var n=document.createElement("IMG");n.classList.add("games-table__image"),n.src=e.img,n.alt=e.title;var r=document.createElement("DIV");r.classList.add("games-table__info");var s=document.createElement("SPAN");s.classList.add("games-table__name"),s.appendChild(document.createTextNode(e.title));var c=document.createElement("SPAN");c.classList.add("games-table__developer"),c.appendChild(document.createTextNode(e.developer)),r.appendChild(s),r.appendChild(c),d.appendChild(n),d.appendChild(document.createTextNode(" ")),d.appendChild(r);var l=document.createElement("TD");l.classList.add("games-table__score-content");var o=document.createElement("DIV");o.classList.add("games-table__mark"),e.score?(e.score-Math.floor(e.score)==0?o.appendChild(document.createTextNode(e.score+".0")):o.appendChild(document.createTextNode(e.score)),e.score>=3&&e.score<6&&o.classList.add("games-table__mark--yellow"),e.score>=0&&e.score<3&&o.classList.add("games-table__mark--red")):(o.appendChild(document.createTextNode("-")),o.classList.add("games-table__mark--no")),l.appendChild(o);var i=document.createElement("TD");i.classList.add("games-table__review-content");var m=document.createElement("SPAN");switch(m.classList.add("games-table__feedback"),e.reviews.summary){case 0:m.appendChild(document.createTextNode("Negative")),m.classList.add("games-table__feedback--red");break;case 1:m.appendChild(document.createTextNode("Mixed")),m.classList.add("games-table__feedback--yellow");break;case 2:m.appendChild(document.createTextNode("Positive"));break;default:m.appendChild(document.createTextNode("No user reviews")),m.classList.add("games-table__feedback--no")}var p=document.createElement("SPAN");p.classList.add("games-table__review-count");var u=Math.floor(e.reviews.number/1e3),h=e.reviews.number%1e3;h=(h=h.toString()).length<3?h+"00":h,0===u?p.appendChild(document.createTextNode("("+e.reviews.number+")")):p.appendChild(document.createTextNode("("+u+","+h+")")),i.appendChild(m),e.reviews.number>0&&i.appendChild(p);var C=document.createElement("TD");C.classList.add("games-table__genre-content"),C.appendChild(document.createTextNode(e.mainGenre));var _=document.createElement("TD");_.classList.add("games-table__release-date-content");var b=new Date(Date.parse(e.releaseDate)),T=b.toLocaleString("en-GB",{month:"short"}),v=b.getDate()+" "+T+", "+b.getFullYear();_.appendChild(document.createTextNode(v));var g=document.createElement("TD");g.classList.add("games-table__status-content");var N=document.createElement("SPAN");switch(N.classList.add("games-table__status-sale"),e.status){case 0:N.appendChild(document.createTextNode("in development")),N.classList.add("games-table__status-sale--grey");break;case 1:N.appendChild(document.createTextNode("on sale")),N.classList.add("games-table__status-sale--blue");break;case 2:N.appendChild(document.createTextNode("in library"))}g.appendChild(N);var L=document.createElement("TD");L.classList.add("games-table__icons-content");var E=document.createElement("I");E.className="fa fa-gamepad";var f=document.createElement("I");f.className="fa fa-cog";var x=document.createElement("I");x.className="fa fa-share-alt";var S=document.createElement("I");switch(S.className="fa fa-usd",e.status){case 0:L.appendChild(E),L.appendChild(document.createTextNode(" ")),E.classList.add("hidden"),L.appendChild(f),L.appendChild(document.createTextNode(" ")),f.classList.add("hidden"),L.appendChild(x),L.appendChild(document.createTextNode(" "));break;case 1:L.appendChild(S),L.appendChild(document.createTextNode(" ")),L.appendChild(f),L.appendChild(document.createTextNode(" ")),L.appendChild(x),L.appendChild(document.createTextNode(" "));break;case 2:L.appendChild(E),L.appendChild(document.createTextNode(" ")),L.appendChild(f),L.appendChild(document.createTextNode(" ")),L.appendChild(x),L.appendChild(document.createTextNode(" "))}a.appendChild(d),a.appendChild(l),a.appendChild(i),a.appendChild(C),a.appendChild(_),a.appendChild(g),a.appendChild(L),t.appendChild(a)}),a}function sortByScore(){var e=document.querySelectorAll(".games-table__mark");e=[].slice.call(e),sortInvert?e.sort(sortAsc):e.sort(sortDesc);var a=gameTableContainer.querySelector("tbody"),t=a.firstElementChild;clearContainer(a),a.appendChild(t),e.forEach(function(e){var t=e.parentElement.parentElement;a.appendChild(t)}),sortInvert=!sortInvert}var dropdown=document.querySelector(".profile__dropdown"),menu=document.querySelector(".profile__menu");dropdown.onclick=function(e){e.preventDefault(),menu.classList.toggle("profile__menu--is-active")},document.addEventListener("DOMContentLoaded",getData);var gameTableContainer=document.querySelector(".games-table"),sortInvert=!1,sortAsc=function(e,a){var t=Number(e.innerHTML),d=Number(a.innerHTML);return isNaN(t)?-1:isNaN(d)?1:Number(e.innerHTML)-Number(a.innerHTML)},sortDesc=function(e,a){var t=Number(e.innerHTML),d=Number(a.innerHTML);return isNaN(t)?1:isNaN(d)?-1:Number(a.innerHTML)-Number(e.innerHTML)};